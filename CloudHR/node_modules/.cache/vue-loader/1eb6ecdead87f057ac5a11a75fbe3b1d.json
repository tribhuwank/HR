{"remainingRequest":"E:\\Applicatons\\CloudHR\\CloudHR\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\Applicatons\\CloudHR\\CloudHR\\src\\views\\employee\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\Applicatons\\CloudHR\\CloudHR\\src\\views\\employee\\index.vue","mtime":1550499669612},{"path":"E:\\Applicatons\\CloudHR\\CloudHR\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\Applicatons\\CloudHR\\CloudHR\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\Applicatons\\CloudHR\\CloudHR\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\Applicatons\\CloudHR\\CloudHR\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { getEmployeeList } from '@/api/table';\nimport { deleteEmployee } from '@/api/user';\nexport default {\n    data() {\n        return {\n            employees: [],  \n            loading: false,\n            search: ''\n        }\n    },\n    methods: {\n        handleSizeChange(val) {\n            this.getEmployees(1, val);\n        },\n        handleCurrentChange(val) {\n            this.getEmployees(val, 5);\n        },\n        getImageFile: function (ImageURL) {\n            return ImageURL;\n        },\n        \n        getEmployees: function (page, pageSize) {\n            this.loading = true;\n            //NProgress.start();\n            var params = { page: page, pageSize: pageSize }\n            return new Promise((resolve, reject) => {\n                getEmployeeList(params).then((res) => {\n                    this.employees = res.result;\n                    console.log(this.roletableData);\n                    this.loading = false;\n                    resolve()\n                }).catch(error => {\n                    reject(error)\n                })\n            })              \n        },\n       \n        indexMethod(index) {\n            return index +1;\n        },\n        handleEdit(index, row) {\n            this.$router.push({ path: 'employee-edit', name: 'employee-edit', params: { row: row }, meta: { requiresAuth: true, adminAuth: true, operatorAuth: false } });\n        },\n        handleDelete(index, row) {\n            this.$confirm('This will permanently delete the Role. Continue?', 'Warning', {\n                confirmButtonText: 'OK',\n                cancelButtonText: 'Cancel',\n                type: 'warning'\n            }).then(() => {\n                this.loading = true;\n                //NProgress.start();\n\n                var employeeParams = { Id: row.id, PersonId: row.personId, Person: row.person, };\n                deleteEmployee(employeeParams).then((res) => {                       \n                    this.loading = false;\n                    //NProgress.done();\n                    this.getEmployees();\n                    this.$message({\n                        type: 'success',\n                        message: 'Delete completed'\n                    });\n                }).catch((error) => {\n                    this.$message({\n                        type: 'info',\n                        message: 'Delete canceled ' + error\n                    });\n                    this.loading = false;\n                });                   \n                \n            }).catch((error) => {\n                this.$message({\n                    type: 'info',\n                    message: 'Delete canceled ' + error \n                });\n                this.loading = false;\n            });\n        },\n        handleAdd() {\n            this.$router.push({ path: 'employee-add', name: 'employee-add', meta: { requiresAuth: true, adminAuth: true, operatorAuth: false } });\n        }\n    },\n    mounted() {\n        this.getEmployees();\n    }\n};\n",{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src\\views\\employee","sourcesContent":["<template>\r\n    <section style=\"margin:20px;\">\r\n          <el-button round @click=\"handleAdd()\" style=\"margin:20px;float:right\">ADD EMPLOYEE</el-button>\r\n     \r\n          <template>\r\n              <el-table :data=\"employees.results\" v-loading=\"loading\" \r\n                        :default-sort = \"{prop: 'person.gender.name', order: 'descending'}\"\r\n                        style=\"width: 100%\">\r\n                  <el-table-column type=\"index\"\r\n                                   :index=\"indexMethod\">\r\n                  </el-table-column>\r\n                  <el-table-column label=\"Photo\"\r\n                                   width=\"100\">\r\n                      <template slot-scope=\"scope\">\r\n                          <img :src=\"getImageFile(scope.row.person.photo)\" height=\"40\">\r\n                      </template>\r\n                  </el-table-column>\r\n                  <el-table-column label=\"Name\"\r\n                                   width=\"200\">\r\n\r\n                      <template slot-scope=\"scope\">\r\n                          <div slot=\"reference\" class=\"name-wrapper\" v-if=\"scope.row.person.middleName\">\r\n                              {{ scope.row.person.firstName+' '+scope.row.person.middleName+' '+scope.row.person.lastName }}\r\n                          </div>\r\n                          <div slot=\"reference\" class=\"name-wrapper\" v-if=\"!scope.row.person.middleName\">\r\n                              {{ scope.row.person.firstName+' '+scope.row.person.lastName }}\r\n                          </div>\r\n\r\n                      </template>\r\n                  </el-table-column>\r\n                  <el-table-column sortable\r\n                                   label=\"Gender\"\r\n                                   width=\"100\">\r\n                      <template slot-scope=\"scope\">\r\n                          <div slot=\"reference\" class=\"name-wrapper\" v-if=\"scope.row.person.gender\">\r\n                              <el-tag size=\"medium\">{{ scope.row.person.gender.name }}</el-tag>\r\n                          </div>\r\n                          <div slot=\"reference\" class=\"name-wrapper\" v-if=\"!scope.row.person.gender\">\r\n                              <el-tag size=\"medium\">Gender is missing</el-tag>\r\n                          </div>\r\n                      </template>\r\n                  </el-table-column>\r\n                  <el-table-column sortable\r\n                                   label=\"Department\"\r\n                                   width=\"180\">\r\n                      <template slot-scope=\"scope\">\r\n                          <div slot=\"reference\" class=\"name-wrapper\" v-if=\"scope.row.employeeJob.department\">\r\n                              {{ scope.row.employeeJob.department.name }}\r\n                          </div>\r\n                          <div slot=\"reference\" class=\"name-wrapper\" v-if=\"!scope.row.employeeJob.department\">\r\n                              Not assign yet\r\n                          </div>\r\n                      </template>\r\n                  </el-table-column>\r\n                  <el-table-column label=\"Post\"\r\n                                   width=\"180\">\r\n                      <template slot-scope=\"scope\">\r\n                          <div slot=\"reference\" class=\"name-wrapper\" v-if=\"scope.row.employeeJob.post\">\r\n                              {{ scope.row.employeeJob.post.name }}\r\n                          </div>\r\n                          <div slot=\"reference\" class=\"name-wrapper\" v-if=\"!scope.row.employeeJob.post\">\r\n                              Not assign yet\r\n                          </div>\r\n                      </template>\r\n                  </el-table-column>\r\n\r\n                  <el-table-column align=\"right\">\r\n\r\n                      <template slot-scope=\"scope\">\r\n\r\n                          <el-button size=\"mini\"\r\n                                     @click=\"handleEdit(scope.$index, scope.row)\">Edit</el-button>\r\n                          <el-button size=\"mini\"\r\n                                     type=\"danger\"\r\n                                     @click=\"handleDelete(scope.$index, scope.row)\">Delete</el-button>\r\n                      </template>\r\n                  </el-table-column>\r\n              </el-table>\r\n              <div class=\"block\" style=\"text-align: center;\">\r\n                  <span class=\"demonstration\"></span>\r\n                  <el-pagination v-ob:size-change=\"handleSizeChange\"\r\n                                 v-on:current-change=\"handleCurrentChange\"\r\n                                 :current-page.sync=\"employees.currentPage\"\r\n                                 :page-sizes=\"[5,10, 20, 50, 100]\"\r\n                                 :page-size=\"employees.pageSize\"\r\n                                 layout=\"total, sizes, prev, pager, next, jumper\"\r\n                                 :total=\"employees.rowCount\">\r\n                  </el-pagination>\r\n              </div>\r\n          </template>\r\n    </section>\r\n</template>\r\n\r\n<script>\r\n    import { getEmployeeList } from '@/api/table';\r\n    import { deleteEmployee } from '@/api/user';\r\n    export default {\r\n        data() {\r\n            return {\r\n                employees: [],  \r\n                loading: false,\r\n                search: ''\r\n            }\r\n        },\r\n        methods: {\r\n            handleSizeChange(val) {\r\n                this.getEmployees(1, val);\r\n            },\r\n            handleCurrentChange(val) {\r\n                this.getEmployees(val, 5);\r\n            },\r\n            getImageFile: function (ImageURL) {\r\n                return ImageURL;\r\n            },\r\n            \r\n            getEmployees: function (page, pageSize) {\r\n                this.loading = true;\r\n                //NProgress.start();\r\n                var params = { page: page, pageSize: pageSize }\r\n                return new Promise((resolve, reject) => {\r\n                    getEmployeeList(params).then((res) => {\r\n                        this.employees = res.result;\r\n                        console.log(this.roletableData);\r\n                        this.loading = false;\r\n                        resolve()\r\n                    }).catch(error => {\r\n                        reject(error)\r\n                    })\r\n                })              \r\n            },\r\n           \r\n            indexMethod(index) {\r\n                return index +1;\r\n            },\r\n            handleEdit(index, row) {\r\n                this.$router.push({ path: 'employee-edit', name: 'employee-edit', params: { row: row }, meta: { requiresAuth: true, adminAuth: true, operatorAuth: false } });\r\n            },\r\n            handleDelete(index, row) {\r\n                this.$confirm('This will permanently delete the Role. Continue?', 'Warning', {\r\n                    confirmButtonText: 'OK',\r\n                    cancelButtonText: 'Cancel',\r\n                    type: 'warning'\r\n                }).then(() => {\r\n                    this.loading = true;\r\n                    //NProgress.start();\r\n\r\n                    var employeeParams = { Id: row.id, PersonId: row.personId, Person: row.person, };\r\n                    deleteEmployee(employeeParams).then((res) => {                       \r\n                        this.loading = false;\r\n                        //NProgress.done();\r\n                        this.getEmployees();\r\n                        this.$message({\r\n                            type: 'success',\r\n                            message: 'Delete completed'\r\n                        });\r\n                    }).catch((error) => {\r\n                        this.$message({\r\n                            type: 'info',\r\n                            message: 'Delete canceled ' + error\r\n                        });\r\n                        this.loading = false;\r\n                    });                   \r\n                    \r\n                }).catch((error) => {\r\n                    this.$message({\r\n                        type: 'info',\r\n                        message: 'Delete canceled ' + error \r\n                    });\r\n                    this.loading = false;\r\n                });\r\n            },\r\n            handleAdd() {\r\n                this.$router.push({ path: 'employee-add', name: 'employee-add', meta: { requiresAuth: true, adminAuth: true, operatorAuth: false } });\r\n            }\r\n        },\r\n        mounted() {\r\n            this.getEmployees();\r\n        }\r\n    };\r\n</script>\r\n<style scoped>\r\n    \r\n</style>"]}]}