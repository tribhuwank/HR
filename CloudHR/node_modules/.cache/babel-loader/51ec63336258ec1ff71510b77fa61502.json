{"remainingRequest":"E:\\Applicatons\\CloudHR\\CloudHR\\node_modules\\babel-loader\\lib\\index.js!E:\\Applicatons\\CloudHR\\CloudHR\\src\\permission.js","dependencies":[{"path":"E:\\Applicatons\\CloudHR\\CloudHR\\src\\permission.js","mtime":1548393157423},{"path":"E:\\Applicatons\\CloudHR\\CloudHR\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\Applicatons\\CloudHR\\CloudHR\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.promise\";\nimport \"core-js/modules/es7.promise.finally\";\nimport router from './router';\nimport store from './store';\nimport NProgress from 'nprogress'; // Progress 进度条\n\nimport 'nprogress/nprogress.css'; // Progress 进度条样式\n\nimport { Message } from 'element-ui';\nimport { getToken } from '@/utils/auth'; // 验权\n\nvar whiteList = ['/login']; // 不重定向白名单\n\nrouter.beforeEach(function (to, from, next) {\n  NProgress.start();\n\n  if (getToken()) {\n    if (to.path === '/login') {\n      next({\n        path: '/'\n      });\n      NProgress.done(); // if current page is dashboard will not trigger\tafterEach hook, so manually handle it\n    } else {\n      if (store.getters.roles.length === 0) {\n        store.dispatch('GetInfo').then(function (res) {\n          // 拉取用户信息\n          next();\n        }).catch(function (err) {\n          store.dispatch('FedLogOut').then(function () {\n            Message.error(err || 'Verification failed, please login again');\n            next({\n              path: '/'\n            });\n          });\n        });\n      } else {\n        next();\n      }\n    }\n  } else {\n    if (whiteList.indexOf(to.path) !== -1) {\n      next();\n    } else {\n      next('/login');\n      NProgress.done();\n    }\n  }\n});\nrouter.afterEach(function () {\n  NProgress.done(); // 结束Progress\n});",{"version":3,"sources":["E:\\Applicatons\\CloudHR\\CloudHR\\src\\permission.js"],"names":["router","store","NProgress","Message","getToken","whiteList","beforeEach","to","from","next","start","path","done","getters","roles","length","dispatch","then","res","catch","err","error","indexOf","afterEach"],"mappings":";;;AAAA,OAAOA,MAAP,MAAmB,UAAnB;AACA,OAAOC,KAAP,MAAkB,SAAlB;AACA,OAAOC,SAAP,MAAsB,WAAtB,C,CAAkC;;AAClC,OAAO,yBAAP,C,CAAgC;;AAChC,SAASC,OAAT,QAAwB,YAAxB;AACA,SAASC,QAAT,QAAyB,cAAzB,C,CAAwC;;AAExC,IAAMC,SAAS,GAAG,CAAC,QAAD,CAAlB,C,CAA6B;;AAC7BL,MAAM,CAACM,UAAP,CAAkB,UAACC,EAAD,EAAKC,IAAL,EAAWC,IAAX,EAAoB;AAClCP,EAAAA,SAAS,CAACQ,KAAV;;AACA,MAAIN,QAAQ,EAAZ,EAAgB;AACZ,QAAIG,EAAE,CAACI,IAAH,KAAY,QAAhB,EAA0B;AACtBF,MAAAA,IAAI,CAAC;AAAEE,QAAAA,IAAI,EAAE;AAAR,OAAD,CAAJ;AACAT,MAAAA,SAAS,CAACU,IAAV,GAFsB,CAEL;AACpB,KAHD,MAGO;AACH,UAAIX,KAAK,CAACY,OAAN,CAAcC,KAAd,CAAoBC,MAApB,KAA+B,CAAnC,EAAsC;AAClCd,QAAAA,KAAK,CAACe,QAAN,CAAe,SAAf,EAA0BC,IAA1B,CAA+B,UAAAC,GAAG,EAAI;AAAE;AACpCT,UAAAA,IAAI;AACP,SAFD,EAEGU,KAFH,CAES,UAACC,GAAD,EAAS;AACdnB,UAAAA,KAAK,CAACe,QAAN,CAAe,WAAf,EAA4BC,IAA5B,CAAiC,YAAM;AACnCd,YAAAA,OAAO,CAACkB,KAAR,CAAcD,GAAG,IAAI,yCAArB;AACAX,YAAAA,IAAI,CAAC;AAAEE,cAAAA,IAAI,EAAE;AAAR,aAAD,CAAJ;AACH,WAHD;AAIH,SAPD;AAQH,OATD,MASO;AACHF,QAAAA,IAAI;AACP;AACJ;AACJ,GAlBD,MAkBO;AACH,QAAIJ,SAAS,CAACiB,OAAV,CAAkBf,EAAE,CAACI,IAArB,MAA+B,CAAC,CAApC,EAAuC;AACnCF,MAAAA,IAAI;AACP,KAFD,MAEO;AACHA,MAAAA,IAAI,CAAC,QAAD,CAAJ;AACAP,MAAAA,SAAS,CAACU,IAAV;AACH;AACJ;AACJ,CA5BD;AA8BAZ,MAAM,CAACuB,SAAP,CAAiB,YAAM;AACnBrB,EAAAA,SAAS,CAACU,IAAV,GADmB,CACF;AACpB,CAFD","sourcesContent":["import router from './router'\r\nimport store from './store'\r\nimport NProgress from 'nprogress' // Progress 进度条\r\nimport 'nprogress/nprogress.css'// Progress 进度条样式\r\nimport { Message } from 'element-ui'\r\nimport { getToken } from '@/utils/auth' // 验权\r\n\r\nconst whiteList = ['/login'] // 不重定向白名单\r\nrouter.beforeEach((to, from, next) => {\r\n    NProgress.start()\r\n    if (getToken()) {\r\n        if (to.path === '/login') {\r\n            next({ path: '/' })\r\n            NProgress.done() // if current page is dashboard will not trigger\tafterEach hook, so manually handle it\r\n        } else {\r\n            if (store.getters.roles.length === 0) {\r\n                store.dispatch('GetInfo').then(res => { // 拉取用户信息\r\n                    next()\r\n                }).catch((err) => {\r\n                    store.dispatch('FedLogOut').then(() => {\r\n                        Message.error(err || 'Verification failed, please login again')\r\n                        next({ path: '/' })\r\n                    })\r\n                })\r\n            } else {\r\n                next()\r\n            }\r\n        }\r\n    } else {\r\n        if (whiteList.indexOf(to.path) !== -1) {\r\n            next()\r\n        } else {\r\n            next('/login')\r\n            NProgress.done()\r\n        }\r\n    }\r\n})\r\n\r\nrouter.afterEach(() => {\r\n    NProgress.done() // 结束Progress\r\n})\r\n"]}]}